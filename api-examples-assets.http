# Asset Management API Examples
# Make sure to replace {{authToken}} with actual JWT token
# You can get the token from the auth login endpoint

### Variables
@baseUrl = http://localhost:3000
@authToken = your-jwt-token-here

### 1. Create Asset Group
POST {{baseUrl}}/asset-groups
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "groupName": "Product Images",
  "parentGroupId": null
}

### 2. Get All Asset Groups
GET {{baseUrl}}/asset-groups
Authorization: Bearer {{authToken}}

### 3. Get All Asset Groups (with filters)
GET {{baseUrl}}/asset-groups?page=1&limit=10&search=product&sortBy=groupName&sortOrder=asc
Authorization: Bearer {{authToken}}

### 4. Get Asset Group by ID
GET {{baseUrl}}/asset-groups/1
Authorization: Bearer {{authToken}}

### 5. Update Asset Group
PATCH {{baseUrl}}/asset-groups/1
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "groupName": "Updated Product Images",
  "parentGroupId": null
}

### 6. Get Assets in Group
GET {{baseUrl}}/asset-groups/1/assets
Authorization: Bearer {{authToken}}

### 7. Get Assets in Group (with filters)
GET {{baseUrl}}/asset-groups/1/assets?page=1&limit=10&search=image&mimeType=image&sortBy=name
Authorization: Bearer {{authToken}}

### 8. Attach Assets to Group
POST {{baseUrl}}/asset-groups/1/attach-assets
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "assetIds": [1, 2, 3]
}

### 9. Upload Asset (without group)
POST {{baseUrl}}/assets/upload
Authorization: Bearer {{authToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="name"

Sample Image
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="sample.jpg"
Content-Type: image/jpeg

< ./path/to/your/image.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 10. Upload Asset (with group)
POST {{baseUrl}}/assets/upload
Authorization: Bearer {{authToken}}
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="name"

Sample Image with Group
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="assetGroupId"

1
------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="file"; filename="sample.jpg"
Content-Type: image/jpeg

< ./path/to/your/image.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

### 11. Get All Assets
GET {{baseUrl}}/assets
Authorization: Bearer {{authToken}}

### 12. Get All Assets (with filters)
GET {{baseUrl}}/assets?page=1&limit=10&search=image&mimeType=image&minSize=1000&maxSize=1000000&sortBy=name&sortOrder=asc
Authorization: Bearer {{authToken}}

### 13. Get Assets by Group
GET {{baseUrl}}/assets?assetGroupId=1
Authorization: Bearer {{authToken}}

### 14. Get Asset by ID
GET {{baseUrl}}/assets/1
Authorization: Bearer {{authToken}}

### 15. Update Asset (change name)
PATCH {{baseUrl}}/assets/1
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "name": "Updated Asset Name"
}

### 16. Update Asset (move to different group)
PATCH {{baseUrl}}/assets/1
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "assetGroupId": 2
}

### 17. Remove Asset from Group
PATCH {{baseUrl}}/assets/1
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "assetGroupId": null
}

### 18. Export Assets as JSON
GET {{baseUrl}}/assets/export/json
Authorization: Bearer {{authToken}}

### 19. Export Assets as JSON (by group)
GET {{baseUrl}}/assets/export/json?assetGroupId=1
Authorization: Bearer {{authToken}}

### 20. Download Assets as ZIP
POST {{baseUrl}}/assets/zip
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "files": ["https://res.cloudinary.com/your-cloud/image/upload/v1234567890/pixelpim/assets/sample1.jpg", "https://res.cloudinary.com/your-cloud/image/upload/v1234567890/pixelpim/assets/sample2.jpg"]
}

### 21. Delete Asset
DELETE {{baseUrl}}/assets/1
Authorization: Bearer {{authToken}}

### 22. Delete Asset Group
DELETE {{baseUrl}}/asset-groups/1
Authorization: Bearer {{authToken}}

###
# Example Response for Upload Asset:
# {
#   "id": "1",
#   "name": "Sample Image",
#   "fileName": "sample.jpg",
#   "filePath": "https://res.cloudinary.com/your-cloud/image/upload/v1723634600/pixelpim/assets/sample_abc123.jpg",
#   "mimeType": "image/jpeg",
#   "uploadDate": "2025-08-14T10:30:00.000Z",
#   "size": 245760,
#   "userId": 1,
#   "assetGroupId": 1,
#   "createdAt": "2025-08-14T10:30:00.000Z",
#   "updatedAt": "2025-08-14T10:30:00.000Z",
#   "assetGroup": {
#     "id": "1",
#     "groupName": "Product Images",
#     "createdDate": "2025-08-14T10:00:00.000Z",
#     "totalSize": "245760",
#     "userId": 1
#   },
#   "url": "https://res.cloudinary.com/your-cloud/image/upload/v1723634600/pixelpim/assets/sample_abc123.jpg",
#   "formattedSize": "240 KB"
# }

###
# Example Response for Get Assets (Paginated):
# {
#   "data": [
#     {
#       "id": "1",
#       "name": "Sample Image",
#       "fileName": "sample.jpg",
#       "filePath": "https://res.cloudinary.com/your-cloud/image/upload/v1723634600/pixelpim/assets/sample_abc123.jpg",
#       "mimeType": "image/jpeg",
#       "uploadDate": "2025-08-14T10:30:00.000Z",
#       "size": 245760,
#       "userId": 1,
#       "assetGroupId": 1,
#       "createdAt": "2025-08-14T10:30:00.000Z",
#       "updatedAt": "2025-08-14T10:30:00.000Z",
#       "assetGroup": {
#         "id": "1",
#         "groupName": "Product Images",
#         "createdDate": "2025-08-14T10:00:00.000Z",
#         "totalSize": "245760",
#         "userId": 1
#       },
#       "url": "https://res.cloudinary.com/your-cloud/image/upload/v1723634600/pixelpim/assets/sample_abc123.jpg",
#       "formattedSize": "240 KB"
#     }
#   ],
#   "meta": {
#     "total": 1,
#     "page": 1,
#     "limit": 10,
#     "totalPages": 1
#   }
# }

###
# Example Response for Export Assets as JSON:
# [
#   {
#     "id": "1",
#     "name": "Sample Image",
#     "url": "https://res.cloudinary.com/your-cloud/image/upload/v1723634600/pixelpim/assets/sample_abc123.jpg",
#     "fileName": "sample.jpg",
#     "mimeType": "image/jpeg",
#     "size": "245760",
#     "uploadDate": "2025-08-14T10:30:00.000Z",
#     "folder": {
#       "id": 1,
#       "name": "Product Images"
#     }
#   }
# ]
