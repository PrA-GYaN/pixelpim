### Asset Groups API Examples
### Updated to support hierarchical folder structure with parent-child filtering

@baseUrl = http://localhost:3000
@authToken = your-jwt-token-here

### 1. Get All Root Level Asset Groups (parentGroupId = null)
### Returns only groups at the root level (no parent)
GET {{baseUrl}}/asset-groups
Authorization: Bearer {{authToken}}

### 2. Get Root Level Asset Groups with Pagination
GET {{baseUrl}}/asset-groups?page=1&limit=10
Authorization: Bearer {{authToken}}

### 3. Get Root Level Asset Groups with Search
GET {{baseUrl}}/asset-groups?search=documents
Authorization: Bearer {{authToken}}

### 4. Get Root Level Asset Groups with Filters
GET {{baseUrl}}/asset-groups?minAssets=5&maxAssets=50&hasAssets=true
Authorization: Bearer {{authToken}}

### 5. Get Child Groups of a Specific Parent (e.g., parentId = 1)
### Returns only groups where parentGroupId = 1
GET {{baseUrl}}/asset-groups/1/children
Authorization: Bearer {{authToken}}

### 6. Get Child Groups with Pagination
GET {{baseUrl}}/asset-groups/1/children?page=1&limit=10
Authorization: Bearer {{authToken}}

### 7. Get Child Groups with Search and Filters
GET {{baseUrl}}/asset-groups/2/children?search=photos&minAssets=10
Authorization: Bearer {{authToken}}

### 8. Create a Root Level Asset Group (no parent)
POST {{baseUrl}}/asset-groups
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "groupName": "My Documents"
}

### 9. Create a Child Asset Group (with parent)
POST {{baseUrl}}/asset-groups
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "groupName": "Personal Photos",
  "parentGroupId": 1
}

### 10. Get a Specific Asset Group by ID
### Now includes parentGroupId and childGroups count in response
GET {{baseUrl}}/asset-groups/1
Authorization: Bearer {{authToken}}

### 11. Update Asset Group (change name and/or parent)
PATCH {{baseUrl}}/asset-groups/1
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "groupName": "Updated Name",
  "parentGroupId": 2
}

### 12. Move Asset Group to Root Level
PATCH {{baseUrl}}/asset-groups/3
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "parentGroupId": null
}

### 13. Get Assets in a Group
GET {{baseUrl}}/asset-groups/1/assets
Authorization: Bearer {{authToken}}

### 14. Get Assets in a Group with Filters
GET {{baseUrl}}/asset-groups/1/assets?mimeType=image&minSize=1000&maxSize=5000000
Authorization: Bearer {{authToken}}

### 15. Attach Assets to a Group
POST {{baseUrl}}/asset-groups/1/attach-assets
Authorization: Bearer {{authToken}}
Content-Type: application/json

{
  "assetIds": [1, 2, 3, 4, 5]
}

### 16. Delete an Asset Group
DELETE {{baseUrl}}/asset-groups/1
Authorization: Bearer {{authToken}}

###
### HIERARCHICAL NAVIGATION EXAMPLE
###

### Step 1: Get all root folders
GET {{baseUrl}}/asset-groups
Authorization: Bearer {{authToken}}

### Step 2: Navigate into folder with ID 1
GET {{baseUrl}}/asset-groups/1/children
Authorization: Bearer {{authToken}}

### Step 3: Navigate into subfolder with ID 5
GET {{baseUrl}}/asset-groups/5/children
Authorization: Bearer {{authToken}}

### Step 4: Get details of the current folder
GET {{baseUrl}}/asset-groups/5
Authorization: Bearer {{authToken}}

### Step 5: Get assets in the current folder
GET {{baseUrl}}/asset-groups/5/assets
Authorization: Bearer {{authToken}}

###
### RESPONSE STRUCTURE NOTES
###

# Root level groups response now includes:
# {
#   "data": [
#     {
#       "id": 1,
#       "groupName": "Documents",
#       "parentGroupId": null,    // ← Now included! null means root level
#       "createdDate": "2024-01-01T00:00:00.000Z",
#       "createdAt": "2024-01-01T00:00:00.000Z",
#       "updatedAt": "2024-01-01T00:00:00.000Z",
#       "userId": 1,
#       "totalSize": "1234567",
#       "_count": {
#         "assets": 10,
#         "childGroups": 3    // ← Now included! Number of subfolders
#       }
#     }
#   ],
#   "meta": { ... }
# }

# Child groups response (e.g., /asset-groups/1/children):
# {
#   "data": [
#     {
#       "id": 5,
#       "groupName": "Personal",
#       "parentGroupId": 1,    // ← Points to parent folder
#       "createdDate": "2024-01-01T00:00:00.000Z",
#       "createdAt": "2024-01-01T00:00:00.000Z",
#       "updatedAt": "2024-01-01T00:00:00.000Z",
#       "userId": 1,
#       "totalSize": "500000",
#       "_count": {
#         "assets": 5,
#         "childGroups": 2
#       }
#     }
#   ],
#   "meta": { ... }
# }
